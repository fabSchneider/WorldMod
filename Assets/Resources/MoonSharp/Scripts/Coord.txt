Coord = {}
Coord.__index = Coord

local function newCoord( lon, lat )
    return setmetatable( { lon = lon or 0, lat = lat or 0 }, Coord )
end

function iscoord( cTbl )
    return getmetatable( cTbl ) == Coord
end

function Coord.__unm( cTbl )
    return newCoord( -cTbl.lon, -cTbl.lat)
end

function Coord.__add( a, b )
    return newCoord( a.lon + b.lon, a.lat + b.lat)
end

function Coord.__sub( a, b )
    return newCoord( a.lon - b.lon, a.lat - b.lat)
end

function Coord.__mul( a, b )
    if type( a ) == "number" then
        return newCoord( a * b.lon, a * b.lat)
    elseif type( b ) == "number" then
        return newCoord( a.lon * b, a.lat * b)
    else
        return newCoord( a.lon * b.lon, a.lat * b.lat)
    end
end

function Coord.__div( a, b )
    return newCoord( a.lon / b, a.lat / b )
end

function Coord.__eq( a, b )
    return a.lon == b.lon and a.lat == b.lat
end

function Coord:__tostring()
    return "( lon: " .. self.lon .. ", lat: " .. self.lat .. ")"
end

return setmetatable( Coord, { __call = function( _, ... ) return newCoord( ... ) end } )